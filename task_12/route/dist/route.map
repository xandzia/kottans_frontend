{"version":3,"sources":["src/Facepalm/Component.js","src/Facepalm/index.js","src/utils/index.js","src/components/Login.js","src/components/Singup.js","src/components/App.js","src/Facepalm/Router.js","src/routes.js","index.js"],"names":["Component","props","state","host","nextState","Object","assign","_render","nextProps","onBeforeUpdate","children","render","innerHTML","Array","isArray","append","default","bindAll","context","names","forEach","name","bind","Error","toHtml","template","document","createElement","string","trim","content","URL_PARAM_REGEXP","isUrlParam","test","path","urlToRegExp","RegExp","url","replace","isEqualPaths","extractUrlParams","values","split","params","reduce","acc","param","index","slice","Login","classList","add","addEventListener","handleSubmit","ev","preventDefault","userName","event","target","uname","value","user","console","log","window","location","hash","Singup","App","username","Router","routes","currentRoute","currentComponent","handleUrlChange","nextRoute","find","href","onEnter","handleRedirect","redirectTo","updateState","activeComponent","component","update","handleLogin","router","getElementById"],"mappings":"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","file":"route.map","sourcesContent":["class Component {\n    constructor(props) {\n        this.props = props || {};\n        this.state = {};\n\n        this.host = null;\n    }\n\n    updateState(nextState) {\n        this.state = Object.assign({}, this.state, nextState);\n        this._render();\n    }\n    \n    onBeforeUpdate(nextProps) {}\n\n    update(nextProps) {\n        this.onBeforeUpdate(nextProps);\n        this.props = Object.assign({}, this.props, nextProps);\n        return this._render();\n    }\n\n    _render() {\n        const children = this.render();\n\n        this.host.innerHTML = '';\n\n        if (typeof children === 'string') {\n            this.host.innerHTML = children;\n        } else if (Array.isArray(children)) {\n            this.host.append(...children);\n        } else {\n            this.host.append(children);\n        }\n\n        return this.host;\n    }\n\n    render() {}\n}\n\nexport default Component;\n","export { default as Component } from './Component';\n","export const bindAll = (context, ...names) => {\n  names.forEach(name => {\n    if (typeof context[name] === 'function') {\n      context[name] = context[name].bind(context);\n    } else {\n      throw Error(\n        `Expected function ${name}. Instead received: ${typeof context[name]}`\n      );\n    }\n  });\n};\n\nexport const toHtml = string => {\n    const template = document.createElement('template');\n    template.innerHTML = string.trim();\n    \n    return template.content;\n}\n\nconst URL_PARAM_REGEXP = /:\\w+/g;\nconst isUrlParam = path => URL_PARAM_REGEXP.test(path);\nconst urlToRegExp = url => \n    RegExp(`^${url.replace(URL_PARAM_REGEXP, '(.*)')}$`);\n\nexport const isEqualPaths = (template, url) => urlToRegExp(template).test(url);\n\nexport const extractUrlParams = (template, url) => {\n  const values = url.split('/');\n  const params = {};\n\n  if (!values) {\n    return params;\n  }\n\n  return template.split('/').reduce((acc, param, index) => {\n    if (!isUrlParam(param)) {\n      return acc;\n    }\n    acc[param.slice(1)] = values[index];\n    return acc;\n  }, params);\n};\n","import { Component } from '../Facepalm';\nimport { bindAll } from '../utils';\n\nclass Login extends Component {\n   constructor(props) {\n       super(props);\n              \n       this.host = document.createElement('form');\n       this.host.classList.add('form');\n       \n       bindAll(this, 'handleSubmit');\n       this.host.addEventListener('submit', this.handleSubmit );\n   }\n    \n    handleSubmit(ev) {\n        ev.preventDefault();\n                \n        const userName = event.target.uname.value.trim();\n//        const password = event.target.psw.value.trim();\n//        console.log('user-target', this.props);\n        this.props.user(userName);\n        \n        console.log('login-props', this.props);\n        console.log('LOGIN','userName:', userName);\n        window.location.hash = '#main';\n    }\n    \n    render() {\n        return `\n          <div class=\"avatar\"><img src=\"\" alt=\"Avatar\" class=\"avatar\"></div>\n            <input type=\"text\" placeholder=\"Username\" name=\"uname\" required>\n            <input type=\"password\" placeholder=\"Password\" name=\"psw\" required>\n\n            <button type=\"submit\" id=\"login\">Login</button>\n            <a href=\"#singup\">Sign Up</a>`;\n//        <a href=\"#\">MAIN</a>`;\n//            <label for=\"psw\"><b>Password</b></label>\n    }\n    \n\n}\n\nexport default Login;\n","import { Component } from '../Facepalm';\nimport { bindAll } from '../utils';\n\nclass Singup extends Component {\n    constructor(props) {\n        super(props);\n\n        this.host = document.createElement('form');\n        this.host.classList.add('form');\n\n        //       bindAll(this, '');\n    }\n    \n    render() {\n        \n        return `\n          <div class=\"avatar\"><img src=\"/dist/a3008c245d4370a193f8469baba6d707.png\" alt=\"Avatar\" class=\"avatar\"></div>\n            <input type=\"text\" placeholder=\"Enter Name\" name=\"uname\" required>\n            <input type=\"password\" placeholder=\"Enter Password\" name=\"psw\" required>\n            <input type=\"password\" placeholder=\"Repeat Password\" name=\"psw-repeat\" required>\n            <input type=\"text\" placeholder=\"Enter Email\" name=\"email\" required>\n\n            <button type=\"submit\" class=\"signupbtn\" id=\"singUp\">Sign Up</button>`;\n        \n    }\n\n}\n\nexport default Singup;\n","import { Component } from '../Facepalm';\nimport Login from './Login';\nimport Singup from './Singup';\n\n\nimport { bindAll } from '../utils';\n\nclass App extends Component {\n   constructor(props) {\n       super(props);\n       \n       this.host = document.createElement('div');\n\n   }\n    \n    onBeforeUpdate(nextProps) {\n    }\n    \n    render() {\n        console.log(this.props);\n        return `<div class=\"main\"><h1>Hello ${this.props.username}</h1>\n                <a href=\"#login\">LOG OUT</a></div>`;\n    }\n\n}\n\nexport default App;","import Component from './Component';\nimport { bindAll, isEqualPaths, extractUrlParams } from '../utils';\n\nclass Router extends Component {\n  constructor(props) {\n    super(props);\n      \n      const { routes, host } = this.props;\n\n      this.state = {\n          routes,\n          currentRoute: null,\n          currentComponent: null,\n          username: null,\n      };\n      \n    this.host = host;\n      \n    bindAll(this, 'handleUrlChange', 'handleLogin');\n\n    window.addEventListener('hashchange', () =>\n      this.handleUrlChange(this.path)\n    );\n\n    this.handleUrlChange(this.path);\n      \n  }\n\n  get path() {\n    return window.location.hash.slice(1);\n  }\n\n  handleUrlChange(path) {\n    const { routes, currentRoute } = this.state;\n      \n    const nextRoute = routes.find(({ href }) =>\n        isEqualPaths(href, this.path),\n//            href === this.path\n    );\n            \n      if(nextRoute && nextRoute !== currentRoute) {\n          \n          if (nextRoute.onEnter) {\n             nextRoute.onEnter(this.handleRedirect, this.state);\n          }\n          if (nextRoute.redirectTo) {\n            return this.handleRedirect(nextRoute.redirectTo);\n          }\n          \n          this.updateState({\n              activeComponent: new nextRoute.component(),\n              currentRoute: nextRoute,\n          })\n      }\n  }\n\n  handleRedirect(url) {\n    window.location.hash = url;\n  }\n    \n  handleLogin(userName) {\n    this.updateState({ userName });\n      this.state.username = userName;\n  }\n    \n  render() {\n    const { activeComponent, currentRoute, username } = this.state;\n      \n    return activeComponent.update({\n        params: extractUrlParams(currentRoute.href, this.path),\n        user: this.handleLogin,\n        username: username,\n    });\n  }\n}\n\nexport default Router;","import App from './components/App';\nimport Login from './components/Login';\nimport Singup from './components/Singup';\n\nconst routes = [\n  {\n    href: '',\n    component: Login,\n    redirectTo: 'login',\n  },\n  {\n    href: 'main',\n    component: App,\n    onEnter: ( handleRedirect, { userName } ) => {\n        if (userName != 'anna') {\n            handleRedirect('login');\n            return false;\n        } else \n//            handleRedirect('');\n            return;\n//        console.log(arguments)\n    },\n  },\n  {\n    href: 'user/:id',\n    component: App,\n//    onEnter: (handleRedirect) => {\n//        if (true) {\n//            handleRedirect('/login');\n//        }\n////        return false;\n//        console.log(arguments)\n//    },\n  },\n  {\n    href: 'login',\n    component: Login,\n  },\n  {\n    href: 'singup',\n    component: Singup,\n  },\n];\n\nexport default routes;\n","import App from './src/components/App';\nimport Router from './src/Facepalm/Router';\nimport routes from './src/routes';\n\nconst router = new Router({ host: document.getElementById('root'), routes })\n//const app = new App({ host: document.getElementById('root') });\n//app.update();\n"]}